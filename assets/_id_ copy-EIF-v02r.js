import{a_ as x,a as S,i as k,u as q,k as F,o as w,b as B,d as t,w as r,n as u,t as n,M as C,e as l,aG as M,aE as $,V as v,l as g,a$ as E,F as N,aD as D}from"./index-CO9mLxTo.js";import{c as P,d as R,u as T,b as U}from"./vee-validate.esm-wMq_nr5j.js";import{V as c}from"./VCol-CfMDGnhR.js";import{V as j}from"./VForm-eicm0EGy.js";import{V as A}from"./VContainer-B5nYW0lP.js";import"./_commonjsHelpers-Cpj98o6Y.js";const G={class:"text-center"},I=u("h1",{class:"text-center text-red"},"已下架",-1),X={__name:"[id] copy",setup(L){const{api:_}=D(),f=x(),y=S(),d=k(),m=q(),e=F({_id:"",name:"",price:0,description:"",image:"",sell:!0,category:""});(async()=>{var o,s;try{const{data:a}=await _.get("/product/"+f.params.id);e.value._id=a.result._id,e.value.name=a.result.name,e.value.price=a.result.price,e.value.description=a.result.description,e.value.image=a.result.image,e.value.sell=a.result.sell,e.value.category=a.result.category,document.title="購物網 | "+e.value.name}catch(a){console.log(a),d({text:((s=(o=a==null?void 0:a.response)==null?void 0:o.data)==null?void 0:s.message)||"發生錯誤",snackbarProps:{color:"red"}})}})();const V=P({quantity:R().typeError("數量必填").required("數量必填").min(1,"最少為 1")}),{isSubmitting:p,handleSubmit:b}=T({validationSchema:V,initialValues:{quantity:1}}),i=U("quantity"),h=b(async o=>{if(!m.isLogin){y.push("/login");return}const s=await m.addCart(e.value._id,o.quantity);d({text:s.text,snackbarProps:{color:s.color}})});return(o,s)=>(w(),B(N,null,[t(A,null,{default:r(()=>[t(c,{cols:"12"},{default:r(()=>[u("h1",G,n(e.value.name),1)]),_:1}),t(c,{cols:"12"},{default:r(()=>[t(C,{src:e.value.image,height:"200"},null,8,["src"])]),_:1}),t(c,{cols:"12"},{default:r(()=>[u("p",null,"$"+n(e.value.price),1),u("p",null,n(e.value.description),1),t(j,{disabled:l(p),onSubmit:M(l(h),["prevent"])},{default:r(()=>[t($,{type:"number",modelValue:l(i).value.value,"onUpdate:modelValue":s[0]||(s[0]=a=>l(i).value.value=a),modelModifiers:{number:!0},"error-messages":l(i).errorMessage.value},null,8,["modelValue","error-messages"]),t(v,{type:"submit","prepend-icon":"mdi-cart",loading:l(p)},{default:r(()=>[g("加入購物車")]),_:1},8,["loading"])]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1}),t(E,{class:"align-center justify-center text-center","model-value":!e.value.sell,persistent:""},{default:r(()=>[I,t(v,{to:"/"},{default:r(()=>[g("回首頁")]),_:1})]),_:1},8,["model-value"])],64))}};export{X as default};
